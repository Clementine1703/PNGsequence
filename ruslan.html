<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Main</title>
	<style>
		*{
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body{
			width: 100%;
			min-height: 100vh;
		}

		.background{
			position: fixed;
			width: 100%;
			height: 100vh;
		}

		.container{
			width: 100%;
			height: 900vh;
		}
	</style>
</head>
<body>
	<div class="background">
		<canvas id="bgAnimation" ></canvas>
	</div>

	<div class="container">

	</div>
	
	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', ()=>{

			function sprite (options) {
				
				var that = {};
							  
				that.context = options.context;
				that.width = options.width;
				that.height = options.height;
				that.image = options.image;
		  
				
				that.render = function () {

				that.context.clearRect(0, 0, canvas.width, canvas.height);

				// Draw the animation
				that.context.drawImage(
					that.image,
					0,
					0,
					that.width,
					that.height,
					0,
					0,
					that.width,
					that.height);
				};
				
				return that;
		  }

			var bgImage = new Image();
			bgImage.src = "bg_images/babina30fps_jpeg_v3179.jpg";

			var canvas = document.getElementById("bgAnimation");
			canvas.width = innerWidth;
			canvas.height = innerHeight;

			var bg = sprite({
    		context: canvas.getContext("2d"),
    		width: 1920,
    		height: 1080,
    		image: bgImage
			});


















			bgImage.onload = ()=>{
				bg.context.scale(window.innerWidth/bgImage.width, window.innerHeight/bgImage.height);
				bg.render();
			}

			var exScrollValue = 0;










			

			window.addEventListener('wheel', ()=>{
				if (exScrollValue != Math.floor(window.scrollY)){
					changeImage();
					exScrollValue = Math.floor(window.scrollY);
				}
			})

			setInterval(()=>{
				if (exScrollValue != Math.floor(window.scrollY)){
					changeImage();
					exScrollValue = Math.floor(window.scrollY);
				}
			}, 50)
			



			function changeImage(){
				let numberOfImage = String(Math.floor(window.scrollY/((document.body.scrollHeight - window.innerHeight)/179)));
				for (let i = 0; i < 3 - numberOfImage.length; i++){
					numberOfImage = '0' + numberOfImage;
				}

				bgImage.src = `bg_images/babina30fps_jpeg_v3${numberOfImage}.jpg`;
				bgImage.onload = ()=>{
				bg.render();
			}
			}


















			


			

		})
	</script>
</body>
</html>